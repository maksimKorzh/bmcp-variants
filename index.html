<!DOCTYPE HTML>
<html>
  <head>
    <title>Chess variants - play online</title>
    
    <!-- Encoding -->
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    
    <!-- SEO -->
    <meta name="description" content="Bare minimum chess variants implementation in vanilla javascript">
    <meta name="keywords" content="play chess variants with computer online">
    
    <!-- Bootstrap -->
    <link rel="stylesheet" href="libs/css/bootstrap.min.css">
    <script src="libs/js/jquery.min.js"></script>
    <script src="libs/js/bootstrap.bundle.min.js"></script>
    
    <!-- Analytics -->
    <script type="text/javascript">
      if (window.location.href.includes('github')) {
        $.post('https://maksimkorzh.pythonanywhere.com/analytics/api/post', {
          date: new Date,
          url: window.location.href
        });
      }
    </script>
    
  </head>
  <body style="font-family: monospace; font-size: 16px;">
    <div class="row m-0 p-0">
      <div class="m-0 p-0">
        <div class="card" style="margin-top: 5px; margin-left: 5px; margin-right: 2px; height: 100%">
          <!-- Game menu -->
          <div class="card-header text-center m-0 p-2">
            <div class="col btn-group m-0 p-0">
              <button class="btn btn-outline-secondary" onclick="setSide(0)">
                Play white
              </button>
              
              <div class="dropdown">
                <button class="btn btn-outline-secondary dropdown-toggle ml-2 mr-2"
                        type="button"
                        id="dropdownMenuButton"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false">
                  Variant
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <button class="dropdown-item"
                          onclick="loadVariant(this.innerHTML.trim(), '?color=white&searchDepth=5')">
                    Simplified chess (no castling, no enpassant)
                  </button>
                  <button class="dropdown-item">
                    <a href="https://github.com/maksimKorzh/wukong-xiangqi">More variants are comming soon (e.g. Xiangqi)</a>
                  </button>
                </div>
              </div>
              
              <button class="btn btn-outline-secondary" onclick="setSide(1)">
                Play black
              </button>
            </div>
          </div>
          <div class="card-body m-0 p-0">
            <!-- Chess variant frame -->
            <iframe id="variant-frame"
              title="Chess variant"
              width="570"
              height="570"
              style="border: 0px solid black; margin: 0px;"
              src="chess-variants/bmcp_chess_simplified.html?color=white&searchDepth=5">
            </iframe>
          </div>
        </div>
      </div>
      <div class="col m-0 p-0">
        <div class="card" style="margin-top: 5px; margin-left: 5px; margin-left: 2px; height: 100%">
          <!-- Variant name -->
          <div id="variant-name" class="card-header text-center" style="font-size: 20px;"></div>
          
          <!-- Useful links -->
          <div class="row text-center mt-2 mb-1 pl-4 pr-4">
            <div class="col text-left"><a id="variant-play" target="_blank" href="">Standalone version</a></div>
            <div class="col"><a href="mailto:freesoft.for.people@gmail.com">freesoft.for.people@gmail.com</a></div>
            <div class="col text-right"><a id="variant-source" target="_blank" href="">Source code</a></div>
          </div>
          
          <!-- Variant description -->
          <p class="pl-4" id="variant-description"></>
          
          <!-- Variant description -->
          <ul id="variant-features"></ul>
          
          <!-- Embed code -->
          <div class="card-body">
            <textarea id="variant-embed" rows="9" class="form-control"></textarea>
          </div>
        </div>
      </div>
    </div>
  </body>
  
  <script>
    // Variants DB
    const Variants = [
      {
        'name': 'Simplified chess (no castling, no enpassant)',
        'source': 'chess-variants/bmcp_chess_simplified.html',
        'embed': `<!-- Embed chess variant into your website -->
<iframe id="variant-frame"
  title="Chess variant"
  width="570"
  height="570"
  style="border: 0px solid black; margin: 0px;"
  src="https://maksimkorzh.github.io/bmcp-variants/chess-variants/bmcp_chess_simplified.html?color=white&searchDepth=3">
</iframe>`,
        'description': 'Bare minimum implementation an Engine & GUI in vanilla JavaScript to play international western chess dropping nitty gritty rules for didactic purposes, simplicity and clarity',
        'features': [
          'Standard chess moves',
          'no castling',
          'no enpassant',
          'no 3 fold repetition',
          'no 50 rule move count',
          'queen promotion only'
        ],
        'url': 'https://github.com/maksimKorzh/bmcp_js/blob/master/docs/bmcp_2.0.html'
      }
    ];
    
    // pick up variant
    function loadVariant(name, params) {
      // loop over variants DB
      for (let index = 0; index < Variants.length; index++) {
        // found variant
        if (Variants[index].name == name) {
          // init variant
          let variant = Variants[index];
          
          // load variant
          $('#variant-name').text(variant.name);
          $('#variant-frame').attr('src', variant.source + params);
          $('#variant-embed').text(variant.embed);
          $('#variant-description').text(variant.description);
          $('#variant-play').attr('href', variant.source + params);
          $('#variant-source').attr('href', variant.url);
          $('#variant-features').text('');
          
          variant.features.forEach(function(feature) {
            $('#variant-features').append('<li>' + feature + '</li>');
          });
        }
      }
    }
    
    // set side to move
    function setSide(color) {
      if (color) loadVariant($('#variant-name').text(), '?color=black&searchDepth=3');
      else {
        setTimeout(function() {
          loadVariant($('#variant-name').text(), '?color=white&searchDepth=3');
        }, 100);
      }
    }
    
    // load simplified chess by default
    loadVariant('Simplified chess (no castling, no enpassant)', '?color=white&searchDepth=3');
  </script>
<html>













